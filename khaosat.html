<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net 'unsafe-inline' 'unsafe-eval'; style-src 'self' https://cdn.jsdelivr.net 'unsafe-inline'; connect-src 'self' https://sheets.googleapis.com https://*.googleapis.com https://*.google.com https://script.google.com https://script.googleusercontent.com; img-src 'self' data: https:; font-src 'self' https://cdn.jsdelivr.net data:;">
    <title>Khảo sát - Hệ thống Khảo sát</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">Hệ thống Khảo sát</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="khaosat.html">Khảo sát</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <h2>Form Khảo sát</h2>
        <form id="khaoSatForm" class="mt-4">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="hoTen" class="form-label">Họ và tên</label>
                    <input type="text" class="form-control" id="hoTen" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="dienThoai" class="form-label">Điện thoại</label>
                    <input type="tel" class="form-control" id="dienThoai" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="viTri" class="form-label">Vị trí</label>
                    <input type="text" class="form-control" id="viTri" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="diaChi" class="form-label">Địa chỉ</label>
                    <input type="text" class="form-control" id="diaChi" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="nguoiLon" class="form-label">Số người lớn</label>
                    <input type="number" class="form-control" id="nguoiLon" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="treEm" class="form-label">Số trẻ em</label>
                    <input type="number" class="form-control" id="treEm" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="loaiNhaO" class="form-label">Loại nhà ở</label>
                    <select class="form-select" id="loaiNhaO" required>
                        <option value="">Chọn loại nhà ở</option>
                        <option value="Nha rieng">Nhà riêng</option>
                        <option value="Thue nha Nguyen can">Thuê nhà Nguyên căn</option>
                        <option value="Nha tro">Nhà trọ</option>
                    </select>
                </div>
            </div>

            <h4 class="mt-4">Chi phí sinh hoạt</h4>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="chiPhiNhaO" class="form-label">Chi phí nhà ở</label>
                    <input type="number" class="form-control" id="chiPhiNhaO" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="gao" class="form-label">Gạo</label>
                    <input type="number" class="form-control" id="gao" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="thit" class="form-label">Thịt</label>
                    <input type="number" class="form-control" id="thit" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="ca" class="form-label">Cá</label>
                    <input type="number" class="form-control" id="ca" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="rauCu" class="form-label">Rau củ</label>
                    <input type="number" class="form-control" id="rauCu" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="sua" class="form-label">Sữa</label>
                    <input type="number" class="form-control" id="sua" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="giaVi" class="form-label">Gia vị</label>
                    <input type="number" class="form-control" id="giaVi" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="hocPhi" class="form-label">Học phí</label>
                    <input type="number" class="form-control" id="hocPhi" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="sachVo" class="form-label">Sách vở</label>
                    <input type="number" class="form-control" id="sachVo" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="dongPhuc" class="form-label">Đồng phục</label>
                    <input type="number" class="form-control" id="dongPhuc" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="khacGiaoDuc" class="form-label">Khác (Giáo dục)</label>
                    <input type="number" class="form-control" id="khacGiaoDuc" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="dienNuoc" class="form-label">Điện nước</label>
                    <input type="number" class="form-control" id="dienNuoc" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="internet" class="form-label">Internet</label>
                    <input type="number" class="form-control" id="internet" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="rac" class="form-label">Rác</label>
                    <input type="number" class="form-control" id="rac" required>
                </div>
            </div>

            <h4 class="mt-4">Thu nhập</h4>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="thuNhapChinh" class="form-label">Thu nhập chính</label>
                    <input type="number" class="form-control" id="thuNhapChinh" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="thuNhapPhu" class="form-label">Thu nhập phụ</label>
                    <input type="number" class="form-control" id="thuNhapPhu" required>
                </div>
            </div>

            <div class="mb-3">
                <label for="ghiChu" class="form-label">Ghi chú</label>
                <textarea class="form-control" id="ghiChu" rows="3"></textarea>
            </div>

            <button type="submit" class="btn btn-primary">Gửi khảo sát</button>
        </form>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/app.js"></script>
    <script>
    document.getElementById('khaoSatForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        // Lấy dữ liệu từ form
        const data = {
            hoTen: document.getElementById('hoTen').value,
            dienThoai: document.getElementById('dienThoai').value,
            viTri: document.getElementById('viTri').value,
            diaChi: document.getElementById('diaChi').value,
            nguoiLon: document.getElementById('nguoiLon').value,
            treEm: document.getElementById('treEm').value,
            loaiNhaO: document.getElementById('loaiNhaO').value,
            chiPhiNhaO: document.getElementById('chiPhiNhaO').value,
            gao: document.getElementById('gao').value,
            thit: document.getElementById('thit').value,
            ca: document.getElementById('ca').value,
            rauCu: document.getElementById('rauCu').value,
            sua: document.getElementById('sua').value,
            giaVi: document.getElementById('giaVi').value,
            hocPhi: document.getElementById('hocPhi').value,
            sachVo: document.getElementById('sachVo').value,
            dongPhuc: document.getElementById('dongPhuc').value,
            khacGiaoDuc: document.getElementById('khacGiaoDuc').value,
            dienNuoc: document.getElementById('dienNuoc').value,
            internet: document.getElementById('internet').value,
            rac: document.getElementById('rac').value,
            thuNhapChinh: document.getElementById('thuNhapChinh').value,
            thuNhapPhu: document.getElementById('thuNhapPhu').value,
            ghiChu: document.getElementById('ghiChu').value
        };

        // Gửi dữ liệu lên Google Apps Script
        try {
            const response = await fetch('https://script.google.com/macros/s/AKfycbxVjXAiM3-W3bxNUnmrx-BfZe1sIHAV9h3qhp7T2Y4IB4aEGalvvch6-l5qimz7u7jdsA/exec', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await response.json();
            if (result.status === 'success') {
                alert('Gửi khảo sát thành công!');
                document.getElementById('khaoSatForm').reset();
            } else {
                alert('Gửi khảo sát thất bại: ' + result.message);
            }
        } catch (error) {
            alert('Lỗi khi gửi khảo sát: ' + error);
        }
    });
    </script>
</body>
</html> 
